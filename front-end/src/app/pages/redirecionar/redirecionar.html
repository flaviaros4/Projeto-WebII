<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redirecionar Solicitação</title>
</head>
<body>
  <div class="container">
    <h1>Redirecionar Solicitação</h1>
    <div class="solicitacao-info">
      <p><strong>ID:</strong> 12345</p>
      <p><strong>Descrição:</strong> Impressora não está funcionando</p>
      <p><strong>Funcionário que abriu:</strong> João Silva</p>
      <p><strong>Estado atual:</strong> ABERTA</p>
    </div>
    <div class="redirecionar-form">
      <label for="funcionario">Redirecionar para:</label>
      <select id="funcionario">
        <option value="" disabled selected>Selecione um funcionário</option>
        <option value="2">Maria Souza</option>
        <option value="3">Carlos Pereira</option>
        <option value="4">Ana Costa</option>
      </select>
      <button id="redirecionarBtn">Redirecionar</button>
    </div>

    <div class="historico">
      <h2>Histórico de Redirecionamentos</h2>
      <table>
        <thead>
          <tr>
            <th>Data/Hora</th>
            <th>Origem</th>
            <th>Destino</th>
          </tr>
        </thead>
        <tbody id="historicoBody">
        </tbody>
      </table>
    </div>
  </div>

  <script>
    const funcionarioAtual = "João Silva";

    const redirecionarBtn = document.getElementById('redirecionarBtn');
    const selectFuncionario = document.getElementById('funcionario');
    const historicoBody = document.getElementById('historicoBody');

    redirecionarBtn.addEventListener('click', () => {
      const destino = selectFuncionario.value;
      const destinoNome = selectFuncionario.options[selectFuncionario.selectedIndex].text;

      if (!destino) {
        alert("Selecione um funcionário para redirecionar.");
        return;
      }

      if (destinoNome === funcionarioAtual) {
        alert("Não é possível redirecionar para si mesmo.");
        return;
      }

      const row = document.createElement('tr');
      const agora = new Date().toLocaleString('pt-BR');
      row.innerHTML = `<td>${agora}</td><td>${funcionarioAtual}</td><td>${destinoNome}</td>`;
      historicoBody.appendChild(row);

      selectFuncionario.selectedIndex = 0;

      alert(`Solicitação redirecionada para ${destinoNome}. Estado agora: REDIRECIONADA.`);
    });
  </script>
</body>
</html>
